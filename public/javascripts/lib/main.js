// Generated by CoffeeScript 1.6.3
(function() {
  console.log("fire main.js");

  $(function() {
    var MultiAjaxAutoComplete, formatResult, formatSelection;
    console.log("fire jQ");
    MultiAjaxAutoComplete = function(element, url) {
      $(element).select2({
        placeholder: "Search for a recipe",
        minimumInputLength: 1,
        multiple: true,
        ajax: {
          url: url,
          dataType: 'jsonp',
          data: function(term, page) {
            return {
              '_app_id': '48b32423',
              '&_app_key': 'f801fe2eacf40c98299940e2824de106',
              q: term,
              'maxResult': 10
            };
          },
          results: function(data, page) {
            return {
              results: data.matches
            };
          }
        },
        formatResult: formatResult,
        formatSelection: formatSelection,
        initSelection: function(element, callback) {
          var data;
          data = [];
          $(element.val().split(",")).each(function(i) {
            var item;
            item = this.split(':');
            data.push({
              totalMatchCount: item[0],
              matches: item[1]
            });
          });
          callback(data);
        }
      });
    };
    formatResult = function(movie) {
      return '<div>' + movie.matches + '</div>';
    };
    formatSelection = function(data) {
      return data.matches;
    };
    MultiAjaxAutoComplete('#e1', 'http://api.rottentomatoes.com/api/public/v1.0/movies.json');
    $("#e2").select2({
      placeholder: "Select a State",
      allowClear: true
    });
    $(".chzn-select").chosen();
    $('#save').click(function() {
      return alert($('#e1').val());
    });
    $('#e9').select2();
    $('input').on('click', function(e) {
      var info;
      e.preventDefault();
      console.log($(this));
      info = $(this).serialize();
      console.log("info", info);
      return $.post('/submitrecipe', info, function(data) {
        var i, recipe;
        console.log(data);
        for (i in data.matches) {
          recipe = data.matches[i];
          console.log(recipe);
          return;
        }
      });
    });
  });

}).call(this);
